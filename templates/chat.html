{% extends 'base.html' %}
{% block title %}Chat with {{ other.username }}{% endblock %}
{% block content %}
<h2>Chat with {{ other.username }} ({{ other.role }})</h2>
<div class="border p-3 mb-3" style="height:400px; overflow-y:scroll; background:#f9f9f9;">
  {% for msg in messages %}
    {% if msg.sender_id == current_user.id %}
      <div class="text-end mb-2">
        <small class="text-muted">{{ msg.timestamp.strftime('%Y-%m-%d %H:%M') }}</small><br>
        <span class="badge bg-primary">{{ msg.body }}</span>
      </div>
    {% else %}
      <div class="text-start mb-2">
        <small class="text-muted">{{ msg.timestamp.strftime('%Y-%m-%d %H:%M') }}</small><br>
        <span class="badge bg-secondary">{{ msg.body }}</span>
      </div>
    {% endif %}
  {% endfor %}
</div>
<form method="post">
  <div class="input-group">
    <input type="text" name="body" class="form-control" placeholder="Type your message..." autofocus>
    <button class="btn btn-primary">Send</button>
  </div>
</form>
{% endblock %}
